<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Merrel</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" />
    <!-- MDB -->
    <link rel="shortcut icon" type="image/x-icon" href="/static/images/icon.png" />
    <!-- <link rel="stylesheet" href="css/mdb.min.css" /> -->
    <!-- Custom styles -->
    <link rel="stylesheet" href="/static/css/productDetails.css" />
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
    <header>
  <!-- Jumbotron -->
  <div class="p-3 text-center bg-white border-bottom">
    <div class="container">
      <div class="row gy-3">
        <!-- Left elements -->
        <div class="col-lg-2 col-sm-4 col-4">
          <a href="/" target="_blank" class="float-start">

            <img src="/static/images/logo.png" height="35" />
          </a>
        </div>
        <div class="order-lg-last col-lg-5 col-sm-8 col-8">
          <div class="d-flex float-end">
            <a href="/user/login" class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center btn-light "> <i class="fas fa-user-alt m-1 me-md-2"></i><p class="d-none d-md-block mb-0">Sign in</p> </a>
            <a href="/user/wishlist" class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center btn-light "> <i class="fas fa-heart m-1 me-md-2"></i><p class="d-none d-md-block mb-0">Wishlist</p> </a>
            <a href="/user/cart" class="border rounded py-1 px-3 nav-link d-flex align-items-center btn-light "> <i class="fas fa-shopping-cart m-1 me-md-2"></i><p class="d-none d-md-block mb-0">My cart</p> </a>
          </div>
        </div>
        <div class="col-lg-5 col-md-12 col-12">
          <div class="input-group float-center">
            <div class="form-outline">
              <input type="search" id="form1" class="form-control" style="color: #faca16;" />
              <label class="form-label" for="form1" >Search</label>
            </div>
            <button type="button" class="btn btn-light shadow-0">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
        <!-- Right elements -->
      </div>
    </div>
  </div>
  <!-- Jumbotron -->
  <div class="mb-4" style="background-color: #000000c8;" >
    <div class="container py-4">
      <!-- Breadcrumb -->
       <nav class="d-flex">
        <h6 class="mb-0" style="color: #000000;">
          <a href="/" class="text-white-5" style="color: #ffffff;" >Home</a>
          <span class="text-white-50 fgfg" style="color: #ffffff;" > > </span>
          <a href="/user/products-list" class="text-white-5" style="color: #ffffff;">Products</a>
          <span class="text-white-50 mx-2"> </span>
          <a href="" class="text-whit" style="color: #ffffff;" ><u>Data</u></a>
        </h6>
      </nav>
    </div>
  </div>
</header>

<!-- content -->
<section class="py-5">
  <div class="container">
    <div class="row gx-5">
      <aside class="col-lg-6">
      
        <div class="border rounded-4 mb-3 d-flex justify-content-center">
            <img style= "max-width: 100%; max-height: 100vh; margin: auto; width: 280px; " class="rounded-4 fit" src="/static/images/{{.Image}}" />
        </div>
        </div>
      </aside>
      <main class="col-lg-6">
        <div class="ps-lg-3">
  
          <h4 class="title text-dark">{{.Name}}</h4>
          <div class="d-flex flex-row my-3">
            <div class="text-warning mb-1 me-2">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <span class="ms-1">
                4.5
              </span>
            </div>
            <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>154 orders</span>
            <span class="text-success ms-2">In stock</span>
          </div>
          <input type="hidden" value={{.ID}} id="productId">

          <div class="mb-3">
            {{if .Offer_Name}}
              <span class="h5">₹{{.Price}}</span>
              <!-- You can also include the offer percentage here if needed -->
            {{else}}
              <span class="h5">₹{{.Price}}</span>
            {{end}}
            {{if .Offer_Name}}
              <span class="text-muted"> ({{.Percentage}}% off)</span>
            {{else}}
              <!-- If you want to include "/per box" for the actual price -->
              <span class="text-muted">/per box</span>
            {{end}}
          </div>
          <p>{{.Description}}</p>

          <div class="row">
            <dt class="col-3">Type:</dt>
            <dd class="col-9">Regular</dd>

            <dt class="col-3">Brand</dt>
            <dd class="col-9">{{.Brand_Name}}</dd>

            <dt class="col-3">Stock</dt>
            {{if eq .Stock 0}}
            <dd style="color: crimson;" class="col-9">Out of stock</dd>
            {{else}}{{.ID}}
            <dd class="col-9">{{.Stock}}</dd>
            {{end}}
          </div>
          <hr/>
          <form action="/user/cart/{{.ID}}" method="POST" id="addToCartForm">
            <div class="col-md-4 col-6">
                <label class="mb-2">Size</label>
                <select id="size" class="form-select border border-secondary" style="height: 35px;margin-bottom: 20px" name="size" required>
                    <option id="selected" selected disabled value="">select</option>
                    <option>UK 6</option>
                    <option>UK 7</option>
                    <option>UK 8</option>
                    <option>UK 9</option>
                    <option>UK 10</option>
                </select>
            </div>
            <div class="col-md-4 col-6">
                <label class="mb-2">Quantity</label>
                <select class="form-select border border-secondary" style="height: 35px;margin-bottom: 20px" id="qty" name="quantity" required>
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                    <option>6</option>
                    <option>7</option>
                    <option>8</option>
                    <option>9</option>
                    <option>10</option>
                </select>
            </div>
            <input type="hidden" name="size" id="selectedSize" value="">
            <button class="btn btn-dark shadow-0" onclick="updateSecondFormValues()"><i class="me-1 fa fa-shopping-cart"></i>Add to cart</button>
        </form>

        <form id="productForm" onsubmit="submitBuyNow(event)" >

            <!-- <input type="hidden" name="size" id="selectedSizeForBuyNow" value="">
            <button style="margin-top: 20px;" class="btn btn-dark shadow-0"><i class="me-1 fa fa-shopping-basket" ></i>Buy now</button> -->


          <a href="/user/wishlist/{{.ID}}" style="margin-left: 20px;margin-top: 20px;" class="btn btn-outline-success border px-2 pt-2 icon-hover"><i class="fas fa-heart fa-lg px-1"></i></a>

        </form>

    </div>
</main>
</div>
</div>
</section>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  const submitBuyNow = async(e) => {
    e.preventDefault()
    try {
      const formData = new FormData()

      const sizeInput = document.getElementById("size").value
      const qtyInput = document.getElementById("qty").value
      const productId = document.getElementById("productId").value
      formData.append("size", sizeInput)
      formData.append("qty", qtyInput)

      console.log(sizeInput, "size");
      console.log(qtyInput, "qyt");
      console.log(productId);
      window.location.href = `http://localhost:3000/user/buy-now/${productId}?size=${sizeInput}&qty=${qtyInput}`
      console.log(response.data);
    } catch (error) {
      console.log(error.message);
    }
  }
  function updateSecondFormValues() {
      // var selectedSize = document.getElementById('size').value;
      // document.getElementById('selectedSizeForBuyNow').value = selectedSize;

  }
</script>

</body>
</html>

<!-- 
<script>
  function submitForm(event) {
    event.preventDefault(); // Prevent the default form submission

    // Get selected size and quantity values
    var selectedSize = document.querySelector('select[name="size"]').value;
    var selectedQuantity = document.querySelector('select[name="quantity"]').value;

    // Create an object with the data to send to the backend
    var formData = {
      size: selectedSize,
      quantity: selectedQuantity
    };

    // Make an Axios POST request to the backend
    axios.post('/api/submit-product', formData)
      .then(function (response) {
        console.log(response.data);
        // Handle the response from the backend if needed
      })
      .catch(function (error) {
        console.error('Error submitting form:', error);
      });
  }
</script> -->
